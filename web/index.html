<!DOCTYPE html>

<!--
  Copyright (c) 2017, Charlie Youakim. All rights reserved. Use of this source code
  is governed by a BSD-style license that can be found in the LICENSE file.
-->

<html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="scaffolded-by" content="https://github.com/google/stagehand">
    <title>addresspickerdartconsumer</title>
    <link rel="stylesheet" href="styles.css">
    <script defer src="main.dart" type="application/dart"></script>
    <script defer src="packages/browser/dart.js"></script>
</head>

<body>

  <div id="anchor"></div>
	<script type="application/javascript">
		var getEvent = new CustomEvent("fromJS", {
			detail: {
				command: "getAddressUpdate"
			}
		})

		setInterval(function() {
			document.dispatchEvent(getEvent)
			console.log("js sent request")
		}, 3000)

 		document.addEventListener("fromDart", function(event){
        switch (event.detail.type) {
					case "init":
						var initEvent = new CustomEvent("fromJS", {
							detail: {
								command: "initAddressEditor"
							}
						})
						document.dispatchEvent(initEvent);
					case "getAddressUpdateResponse":
						console.log("Address = " + event.detail.data)
				}
    })
	</script>
</body>
</html>
